# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∑–∞–ø–∏—Å–∏

# üá∑üá∫ –†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–æ–≤ (citas) –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ–ª –ò—Å–ø–∞–Ω–∏–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏ (TIE, NIE, tarjeta roja) –¥–ª—è –ª–∏—Ü, –∑–∞–ø—Ä–æ—Å–∏–≤—à–∏—Ö —É–±–µ–∂–∏—â–µ. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –≤–∞—à Telegram-–±–æ—Ç, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤–≤–µ–¥—ë—Ç –≤–∞—à–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–∫–æ–Ω—á–∏—Ç –∑–∞–ø–∏—Å—å –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, –ª–∏–±–æ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–ø–∏—Å—å –≤—Ä—É—á–Ω—É—é.

### –û–Ω–∞ –Ω—É–∂–Ω–∞ –≤–∞–º –∏ –ø—Ä–∏–¥—ë—Ç—Å—è —Å–æ –≤—Å–µ–º —ç—Ç–∏–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –µ—Å–ª–∏

- –í—ã –∂–∏–≤—ë—Ç–µ –≤ –ò—Å–ø–∞–Ω–∏–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ê–ª–∏–∫–∞–Ω—Ç–µ)
- –í—ã –ø–æ–¥–∞–≤–∞–ª–∏—Å—å –Ω–∞ —É–±–µ–∂–∏—â–µ –∏ –ø–æ–¥–æ—à—ë–ª —Å—Ä–æ–∫ –º–µ–Ω—è—Ç—å –∫–∞—Ä—Ç—É
- –í—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø–ª–∞—Ç–∏—Ç—å 100 –µ–≤—Ä–æ —Å–∏—Ç–æ–ª–æ–≤–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—ë —Å–¥–µ–ª–∞—é—Ç –∑–∞ –≤–∞—Å

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python 3 ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- selenium ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- undetected-chromedriver ‚Äî –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä Chrome –¥–ª—è –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤
- requests ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ API)
- python-dotenv ‚Äî –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞

## –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- Arch Linux / Windows (–ø—Ä–æ–µ–∫—Ç –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π)
- Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
- Google Chrome (—Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ undetected-chromedriver)

## üîó –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç: [https://icp.administracionelectronica.gob.es/icpco/index](https://icp.administracionelectronica.gob.es/icpco/index)

### üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram-–±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [BotFather](https://t.me/BotFather):
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
   - –£–∫–∞–∂–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `CitaCheckerBot`)
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤–∏–¥–∞ `123456789:AAFm2e4f5g6h7i8j9k0l1m2n9o4p5q6r7s8`

2. –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π Chat ID:
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ [userinfobot](https://t.me/userinfobot)
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —ç—Ç–æ–º—É –±–æ—Ç—É
   - –û–Ω –æ—Ç–≤–µ—Ç–∏—Ç —Å –≤–∞—à–∏–º Chat ID

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ:
   - `TELEGRAM_BOT_TOKEN`
   - `TELEGRAM_CHAT_ID`

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.example –≤ .env

- –û—Ç–∫—Ä–æ–π—Ç–µ .env –≤ –ë–ª–æ–∫–Ω–æ—Ç–µ

- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª .env –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```ini
# –í–∞—à–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
PERSONAL_DATA='{
  "txtIdCitado": "Z1234567R",       # –í–∞—à NIE/NIF
  "txtDesCitado": "IVAN PETROV",    # –í–∞—à–µ –∏–º—è –∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
  "txtAnnoCitado": "1985",          # –ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è
  "txtPaisNac": "RUSIA"             # –°—Ç—Ä–∞–Ω–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–∏—Å–ø–∞–Ω—Å–∫–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ)
}'

# –î–∞–Ω–Ω—ã–µ Telegram-–±–æ—Ç–∞
TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
TELEGRAM_CHAT_ID="your_chat_ID"
```

# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

## Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)

- –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–≤—ã –µ–≥–æ –Ω–µ –≤–∏–¥–∏—Ç–µ), –Ω–æ –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞ - –ø–æ–ª—É—á–∏—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º –≤ telegram.
- –≠—Ç–æ –∏–∑–±–∞–≤–ª—è–µ—Ç –≤–∞—Å –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–æ –ª–∏—à–∞–µ—Ç –≤–∞—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –¥–æ–≤–≤–µ—Å—Ç–∏ —á—Ç–æ-–ª–∏–±–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –û–¥–Ω–∞–∫–æ, –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ Docker Compose
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Ñ–∞–π–ª (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ .env.example)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
docker-compose build
docker-compose up
```

- –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ—Ä—Ç—ã:

  - 4444 - Selenium Grid
  - 5900 - VNC (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

# ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ Linux (Arch)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.11:**

   ```bash
   sudo pacman -S python311
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
python3.11 -m venv env_name

source env_name/bin/activate
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä Chrome:

```bash
sudo pacman -S google-chrome
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Chromedriver:

```bash
yay -S chromedriver
```

5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π:

```bash
google-chrome-stable --version  # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–µ—Ä—Å–∏—è 135+
chromedriver --version         # –í–µ—Ä—Å–∏–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å
```

6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install undetected-chromedriver selenium python-dotenv requests
```

7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```bash
cp .env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
```

## Linux (–ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫)

```source env_name/bin/activate
PYTHONPATH=. python scripts/main.py
```

### –ü–∞—Ä–∞ –Ω–µ–±–æ–ª—å—à–∏—Ö –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π  

–≤ —Ñ–∞–π–ª–µ /request_client.py
–µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞ - version_main=136
–≤ —É—á–∞—Å—Ç–∫–µ ```self.driver = uc.Chrome(
            options=options,
            headless=False,
            use_subprocess=True,
            version_main=136
        )```

- –Ω–µ –∑–∞–±—É–¥—å—Å–µ —Å–∏–Ω—Ö–Ω–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à—É –≤–µ—Ä—Å–∏—é Google chrome –∏ ChromeWebDriver
- –í–≤–æ–¥–∏–º –∫–æ–º–∞–Ω–¥—ã:
  - ```chromedriver --version```

    - –£–∑–Ω–∞—ë–º –≤–µ—Ä—Å–∏—é WebDriver

  - ```google-chrome-stable --version```

    - –£–∑–Ω–∞—ë–º –≤–µ—Ä—Å–∏—é google-chrome

–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, –µ—Å–ª–∏ –Ω–µ—Ç —Ç–æ –º–µ–Ω—è–µ–º - ```version_main=136``` –Ω–∞ –≤–µ—Ä—Å–∏—é –≤–∞—à–µ–≥–æ google-chrome

- –î–ª—è —á–∏—Å—Ç–æ—Ç—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤—ã–ø–æ–ª–Ω–∏—Ç—å (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)  
```pkill -f chromedriver && pkill -f chrome && rm -rf /home/v/.config/selenium-profile```

- —Ç.–µ. —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à selenium

# ü™ü –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Windows

## –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.11

–°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞

–í —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–µ –æ—Ç–º–µ—Ç—å—Ç–µ:

- ‚òë Add Python to PATH

- ‚òë Install launcher for all users

## –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Google Chrome

–°–∫–∞—á–∞–π—Ç–µ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é:

- –û—Ç–∫—Ä–æ–π—Ç–µ chrome://settings/help

- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–µ—Ä—Å–∏—è 135+

## –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Chromedriver

–°–∫–∞—á–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Ä—Å–∏—é —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞

–†–∞—Å–ø–∞–∫—É–π—Ç–µ chromedriver.exe –≤ –ø–∞–ø–∫—É —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤ CMD):

```cmd
py -3.11 -m pip install undetected-chromedriver selenium python-dotenv requests
```

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ Windows

```bash
py -3.11 main.py
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

### –î–ª—è Docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–µ—Ä—Å–∏–∏ Chrome –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ ChromeDriver —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ VNC (–ø–æ—Ä—Ç 5900)
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `docker-compose logs`

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—É 5 –º–∏–Ω—É—Ç –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ "Too Many Requests"

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Å–ª–æ—Ç–æ–≤:

- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

- –û—Å—Ç–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- –î–µ–ª–∞–µ—Ç –ø–∞—É–∑—É 1 —á–∞—Å –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ü–∏–∫–ª–æ–º

- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

# Automated Appointment Slot Checker

# üá¨üáß English Version

## üìã Description

The program automatically checks for available appointment slots (citas) on the official Spanish Ministry of Interior website for renewing identity documents (TIE, NIE, tarjeta roja) for asylum seekers. When free slots are found, it sends a notification to your Telegram bot, then can either automatically enter your personal data and complete the booking, or leave the browser open for manual completion.

## Technology Stack

- Python 3 - main programming language
- selenium - browser automation
- undetected-chromedriver - modified Chrome driver to bypass bot protection
- requests - for sending HTTP requests (e.g. to APIs)
- python-dotenv - for loading environment variables from .env file

## Runtime Environment

- Arch Linux / Windows (cross-platform project)
- Docker (recommended deployment method)
- Google Chrome (works through undetected-chromedriver)

## üîó Official website: [https://icp.administracionelectronica.gob.es/icpco/index](https://icp.administracionelectronica.gob.es/icpco/index)

### üîî Telegram Bot Setup

1. Create a bot via [BotFather](https://t.me/BotFather):
   - Send `/newbot`
   - Specify bot name (e.g.: `CitaCheckerBot`)
   - Get token in format `123456789:AAFm2e4f5g6h7i8j9k0l1m2n9o4p5q6r7s8`

2. Get your Chat ID:
   - Add [userinfobot](https://t.me/userinfobot)
   - Send any message to this bot
   - It will reply with your Chat ID

3. Save these values:
   - `TELEGRAM_BOT_TOKEN`
   - `TELEGRAM_CHAT_ID`

# Program Configuration

- Copy env.example to .env
- Open .env in a text editor
- Fill in your details

## üîß Personal Data Configuration

Open .env file and modify:

```ini
# Your personal data
PERSONAL_DATA='{
  "txtIdCitado": "Z1234567R",       # Your NIE/NIF
  "txtDesCitado": "IVAN PETROV",    # Your name as in documents
  "txtAnnoCitado": "1985",          # Birth year
  "txtPaisNac": "RUSIA"             # Birth country (Spanish spelling)
}'

# Telegram bot data
TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
TELEGRAM_CHAT_ID="your_chat_ID"
```

# üöÄ Running the Program

## Docker (Recommended Method)

1. Make sure Docker and Docker Compose are installed
2. Configure .env file (copy from .env.example)
3. Run commands:

```bash
docker-compose build
docker-compose up
```

Available ports:

- 4444 - Selenium Grid
- 5900 - VNC (for debugging)

# ‚öôÔ∏è Linux (Arch) Installation

1. **Install Python 3.11:**

   ```bash
   sudo pacman -S python311
   ```

2. Create virtual environment in project folder:

```bash
python3.11 -m venv env_name
source env_name/bin/activate
```

3. Install Chrome browser:

```bash
sudo pacman -S google-chrome
```

4. Install Chromedriver:

```bash
yay -S chromedriver
```

5. Verify version compatibility:

```bash
google-chrome-stable --version  # Should be version 135+
chromedriver --version         # Versions should match
```

6. Install dependencies:

```bash
pip install undetected-chromedriver selenium python-dotenv requests
```

7. Program configuration:

```bash
cp .env.example .env
nano .env  # Fill in your details
```

## Linux (Local Run)

```bash
source env_name/bin/activate
PYTHONPATH=. python scripts/main.py
```

### Important Notes

In file /request_client.py
there's a line - version_main=136
in section ```self.driver = uc.Chrome(
            options=options,
            headless=False,
            use_subprocess=True,
            version_main=136
        )```

- Don't forget to synchronize your Google Chrome and ChromeWebDriver versions
- Run commands:
  - ```chromedriver --version``` - Check WebDriver version
  - ```google-chrome-stable --version``` - Check Chrome version

Versions should match, if not change ```version_main=136``` to your Chrome version

- For clean runs (optional but recommended):
```pkill -f chromedriver && pkill -f chrome && rm -rf /home/v/.config/selenium-profile```

- This kills browser processes and cleans selenium cache

# ü™ü Windows Installation

## Install Python 3.11

Download installer from official site

During installation check:

- ‚òë Add Python to PATH
- ‚òë Install launcher for all users

## Install Google Chrome

Download from official site

After installation verify version:

- Open chrome://settings/help
- Should be version 135+

## Install Chromedriver

Download matching version from official site
Unzip chromedriver.exe to program folder
Install dependencies (in CMD):

```cmd
py -3.11 -m pip install undetected-chromedriver selenium python-dotenv requests
```

## Windows Local Run

```bash
py -3.11 main.py
```

## ‚ö†Ô∏è Important Notes

### For Docker Deployment

- Ensure Chrome and ChromeDriver versions in container are compatible
- Debug via VNC (port 5900)
- View logs with `docker-compose logs`

Program automatically pauses for 5 minutes when detecting "Too Many Requests"

When slots are found:

- Sends Telegram notification
- Keeps browser open for manual completion
- Pauses for 1 hour before next cycle
- Recommended to run on a server with stable internet connection

# üìú License

MIT License - Free for personal and commercial use

Copyright (c) 2025 REQUEST_SENDER Project
